<div class="remedia-container">
    <mat-sidenav-container class="h-100vh remedia-sidenav-container" (backdropClick)="closeSnav('backdrop')">
      <mat-sidenav-content>
        <app-s-table aria-label="Carousel" role="table" [sTableOptions]="carouselTableOptions"
          (sortCallback)="sortCall($event)"
          (addCallback)="addCarousel()" (globalActionCallback)="globalActionCall($event)"
          (filterCallback)="filterCall($event)"  (colFilterCallback)="colFilterCall($event)"
          (actionCallback)="actionCall($event)" (pageCallback)="pageCall($event)" (refreshCallback)="refreshCall()"
          (timerCallback)="refreshCall()"></app-s-table>
      </mat-sidenav-content>
      <mat-sidenav #snav [mode]="'over'" fixedTopGap="56" class="w-50 z-index-150" position="end">
        <mat-card class="mat-elevation-z0 w-100" *ngIf="carouselData && !carouselData.id">
          <button class="position-absolute r-1p mt--10" mat-icon-button (click)="backFun()"> <mat-icon>close</mat-icon> </button>
          <mat-card-header>
            <mat-card-title>Add Carousel</mat-card-title>
          </mat-card-header>
          <form #adusr="ngForm" name="credentials" autocomplete="off" *ngIf="carouselData">
            <mat-card-content>
              
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Level</mat-label>
                <mat-select [multiple]="false" required
                  placeholder="Choose level" name="level"
                [(ngModel)]="carouselData.levels">
                  <mat-option *ngFor="let level of levelList; let i = index"
                    [value]="level._id" >
                    {{level.level}}
                  </mat-option>
                </mat-select>
                <mat-error> Level is required</mat-error>
              </mat-form-field>
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Description</mat-label>
                <textarea type="text" [(ngModel)]="carouselData.carousel_descs" required matInput
                       placeholder="Enter Description"
                       class="inp-width" name="description" id="description"></textarea>
                <mat-error> Description is required</mat-error>
              </mat-form-field>
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Position</mat-label>
                <input type="number" [(ngModel)]="carouselData.positions" required matInput
                       placeholder="Enter position"
                       class="inp-width" name="Position" id="Position">
                <mat-error> Position is required</mat-error>
              </mat-form-field>
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Carousel Type</mat-label>
                <mat-select [multiple]="false" required (ngModelChange)="updateCountry($event)"
                  placeholder="Choose type" name="type"
                [(ngModel)]="carouselData.data_types">
                  <mat-option *ngFor="let type of dataType; let i = index"
                    [value]="type" >
                    {{type}}
                  </mat-option>
                </mat-select>
                <mat-error> Carousel Type is required</mat-error>
              </mat-form-field>
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Carousel Size</mat-label>
                <mat-select [multiple]="false" required 
                  placeholder="Choose size" name="size"
                [(ngModel)]="carouselData.carousel_sizes">
                  <mat-option *ngFor="let size of carouselSize; let i = index"
                    [value]="size" >
                    {{size}}
                  </mat-option>
                </mat-select>
                <mat-error> Carousel Type is required</mat-error>
              </mat-form-field>
              <div class="row row-fix">
                <div class="col-lg-12">
                  <div class="mat-card modal">
                    <p class="mb-3">Image</p>
                    <input type="file" name="file" (change)="uploadFile($event, 'image_uploads')"/>
                    <img *ngIf="image_uploads" width="208" heigh="100" [src]="image_uploads" alt="">
                  </div>
                </div>
              </div>
              <mat-form-field appearance="outline" class="w-100" *ngIf="carouselData.data_types !=='Other'">
                <mat-select [formControl]="dataCtrl" placeholder="Masterclass" (selectionChange)="carouselData.content_id = $event.value" (openedChange)="closeCurrentData($event)" [multiple]="true" #multiSelect>
                  <mat-option>
                    <ngx-mat-select-search [formControl]="dataFilterCtrl" [noEntriesFoundLabel]="'No matching data found'" [searching]="searching"></ngx-mat-select-search>
                  </mat-option>
                  <mat-option *ngFor="let item of filteredData | async" [value]="item._id">
                    {{item.title}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="w-100" appearance="outline" *ngIf="carouselData.data_types ==='Other'">
                <mat-label>Navigate Link</mat-label>
                <input type="text" [(ngModel)]="carouselData.navigate_links" required matInput
                       placeholder="Enter Navigate Link"
                       class="inp-width" name="link" id="link">
                <mat-error> Navigate Link is required</mat-error>
              </mat-form-field>
            </mat-card-content>
            <div mat-dialog-actions class="mt-2">
              <button type="button" [disabled]="!adusr.form.valid" mat-raised-button color="primary" class="mr-2"
                      (click)="saveCarousel()" id="usrSavebtn">Save
              </button>
              <button mat-raised-button (click)="backFun()">Cancel</button>
            </div>
          </form>
        </mat-card>
      </mat-sidenav>

    </mat-sidenav-container>
  </div>
  
  
  